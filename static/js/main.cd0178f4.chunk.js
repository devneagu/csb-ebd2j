(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{17:function(e,r,t){},24:function(e,r,t){"use strict";t.r(r);var n,a,o,s=t(0),i=t(8),l=t.n(i),d=t(3),c=(t(17),t(4)),m=t(9),u=t(1);const h=c.a.div(n||(n=Object(d.a)(["\n  padding: 1rem;\n\n  table {\n    border-spacing: 0;\n    border: 1px solid black;\n\n    tr {\n      :last-child {\n        td {\n          border-bottom: 0;\n        }\n      }\n    }\n\n    th,\n    td {\n      margin: 0;\n      padding: 0.5rem;\n      border-bottom: 1px solid black;\n      border-right: 1px solid black;\n\n      :last-child {\n        border-right: 0;\n      }\n    }\n  }\n"])));function j(e){let{columns:r,data:t}=e;const{getTableProps:n,getTableBodyProps:a,headerGroups:o,rows:s,prepareRow:i}=Object(m.useTable)({columns:r,data:t});return Object(u.jsxs)("table",{...n(),children:[Object(u.jsx)("thead",{children:o.map((e=>Object(u.jsx)("tr",{...e.getHeaderGroupProps(),children:e.headers.map((e=>Object(u.jsx)("th",{...e.getHeaderProps(),children:e.render("Header")})))})))}),Object(u.jsx)("tbody",{...a(),children:s.map(((e,r)=>(i(e),Object(u.jsx)("tr",{...e.getRowProps(),children:e.cells.map((e=>Object(u.jsx)("td",{...e.getCellProps(),children:e.render("Cell")})))}))))})]})}const g=c.a.div(a||(a=Object(d.a)(["\n  padding: 0;\n  margin: 0;\n  line-height: 0;\n"]))),b=c.a.div(o||(o=Object(d.a)(["\n  border: 1px solid black;\n  width: 30px;\n  height: 30px;\n  display: inline-block;\n  background: white;\n  transition: 0.5s;\n  &.userMove {\n    background: gray;\n  }\n  &.userShip {\n    background: orange;\n  }\n  &.computerShip {\n    background: red;\n  }\n  &.computerMove {\n    background: blue;\n  }\n  &.destroyed {\n    background: black;\n  }\n"])));function p(e,r){var t=Math.floor((e-r)/1e3),n=Math.floor(t/60),a=Math.floor(n/60),o=Math.floor(a/24);return t=t-24*o*60*60-60*(a-=24*o)*60-60*(n=n-24*o*60-60*a),(n=n<10?"0"+n:n)+":"+(t=t<10?"0"+t:t)}function v(e,r){switch(console.log("hi"),r.type){case"selected":if(console.log(r),!e.hasStarted){for(var t={i:r.i,j:r.j},n={i:parseInt(Math.random()*e.gridN),j:parseInt(Math.random()*e.gridN)};n.i===t.i&&t.j===n.j;)n={i:parseInt(Math.random()*e.gridN),j:parseInt(Math.random()*e.gridN)};return{...e,computerPlane:n,userPlane:t,hasStarted:!0,move:0,errorMessage:null,startGameDate:new Date}}if(r.i===e.computerPlane.i&&r.j===e.computerPlane.j)return{...e,gameFinished:!0,won:!0,errorMessage:null,history:[...e.history,{startGameDate:e.startGameDate,endGameDate:new Date,result:"Won",moves:e.moves.length/2+1,duration:p(new Date,e.startGameDate)}]};if(e.gameFinished)return{...e,errorMessage:null};for(var a={i:parseInt(Math.random()*e.gridN),j:parseInt(Math.random()*e.gridN)};e.computerPlane.i===a.i&&e.computerPlane.j===a.j||e.moves.some((e=>e.i===a.i&&e.j===a.j))||r.i===a.i&&r.j===a.j;)a={i:parseInt(Math.random()*e.gridN),j:parseInt(Math.random()*e.gridN)};return e.moves.some((e=>e.i===r.i&&e.j===r.j))?(console.log("Grid already bombed"),{...e,errorMessage:"Grid already Bombed!"}):a.i===e.userPlane.i&&a.j===e.userPlane.j?{...e,gameFinished:!0,won:!1,errorMessage:!1,move:e.move+1,moves:[...e.moves,{i:r.i,j:r.j,by:"user"},{i:a.i,j:a.j,by:"computer"}],history:[...e.history,{startGameDate:e.startGameDate,endGameDate:new Date,result:"Lost",moves:e.moves.length/2,duration:p(new Date,e.startGameDate)}]}:{...e,move:e.move+1,moves:[...e.moves,{i:r.i,j:r.j,by:"user"},{i:a.i,j:a.j,by:"computer"}],errorMessage:null};case"restart":return{gridN:7,hasStarted:!1,gameFinished:!1,move:null,moves:[],errorMessage:null,won:null,startGameDate:null,history:[...e.history]};default:return console.log("default"),e}}function y(){const[e,r]=Object(s.useReducer)(v,{gridN:7,hasStarted:!1,gameFinished:!1,move:null,moves:[],errorMessage:null,won:null,history:JSON.parse(localStorage.getItem("battleplanes5"))||[],startGameDate:null});return console.log(e),Object(s.useEffect)((()=>{localStorage.setItem("battleplanes5",JSON.stringify(e.history))}),[e.history.length]),Object(u.jsxs)("div",{children:[!e.hasStarted&&!e.gameFinished&&Object(u.jsx)("p",{children:"Select your battle position"}),!e.gameFinished&&null!=e.move&&Object(u.jsx)("p",{children:"Destroy your opponent !"}),[...Array(e.gridN).keys()].map(((t,n)=>Object(u.jsx)(g,{children:[...Array(e.gridN).keys()].map(((n,a)=>{var o,s,i,l,d,c;return Object(u.jsx)(b,{className:"\n                  ".concat((null===(o=e.moves)||void 0===o?void 0:o.some((e=>e.i===t&&e.j===n&&"computer"===e.by)))?"computerMove":"","    \n                  ").concat((null===(s=e.userPlane)||void 0===s?void 0:s.i)===t&&(null===(i=e.userPlane)||void 0===i?void 0:i.j)===n?"userShip":"","\n                  ").concat(e.gameFinished&&(null===(l=e.computerPlane)||void 0===l?void 0:l.i)===t&&(null===(d=e.computerPlane)||void 0===d?void 0:d.j)===n?"computerShip":"","\n                  \n                  ").concat((null===(c=e.moves)||void 0===c?void 0:c.some((e=>e.i===t&&e.j===n&&"user"===e.by)))?"userMove":"","\n                  ").concat(e.gameFinished&&!1===e.won&&t===e.userPlane.i&&n===e.userPlane.j?"destroyed":"","\n                  }"),onClick:()=>r({type:"selected",i:t,j:n})},1e8*Math.random())}))},1e8*Math.random()))),e.gameFinished&&Object(u.jsxs)(u.Fragment,{children:[e.won&&Object(u.jsx)("h3",{children:"You've won !"}),!e.won&&Object(u.jsx)("h3",{children:"Unfortunately, you've lost..."}),Object(u.jsxs)("p",{children:["Number of moves :"," ",Object(u.jsx)("span",{style:{color:"red"},children:e.history[e.history.length-1].moves})]}),Object(u.jsx)("button",{onClick:()=>r({type:"restart"}),children:"Play Again!"})]}),e.errorMessage&&Object(u.jsx)("p",{children:e.errorMessage}),O(e.history)]})}function O(e){return e.length>0&&(console.log("DATA:"),console.log(e),(e=e.map((e=>({...e,startGameDate:new Date(e.startGameDate).toLocaleDateString()})))).sort((function(e,r){return r.moves-e.moves}))),Object(u.jsx)(h,{children:Object(u.jsx)(j,{columns:[{Header:"Score table",columns:[{Header:"Date",accessor:"startGameDate"},{Header:"Result",accessor:"result"},{Header:"Moves",accessor:"moves"},{Header:"Duration",accessor:"duration"}]}],data:e})})}const M=document.getElementById("root");l.a.render(Object(u.jsx)(s.StrictMode,{children:Object(u.jsx)(y,{})}),M)}},[[24,1,2]]]);
//# sourceMappingURL=main.cd0178f4.chunk.js.map